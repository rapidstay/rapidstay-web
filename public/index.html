<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- âœ… SEO / OG / Twitter -->
  <title>RapidStay | ì „ ì„¸ê³„ í˜¸í…”ì„ í•œëˆˆì—</title>
  <meta name="description" content="ì„œìš¸, ë¶€ì‚°, ì œì£¼ ë“± ì „ ì§€ì—­ í˜¸í…” ì‹¤ì‹œê°„ ê²€ìƒ‰. RapidStayëŠ” Expedia ê¸°ë°˜ ìµœì €ê°€ ìˆ™ì†Œë¥¼ ë¹ ë¥´ê²Œ ë¹„êµí•©ë‹ˆë‹¤." />
  <meta name="keywords" content="í˜¸í…”ê²€ìƒ‰, ì„œìš¸í˜¸í…”, ì œì£¼í˜¸í…”, ìµìŠ¤í”¼ë””ì•„, ìˆ™ì†Œë¹„êµ, ì—¬í–‰ìˆ™ë°•, RapidStay" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="RapidStay | ì „ ì„¸ê³„ í˜¸í…”ì„ í•œëˆˆì—" />
  <meta property="og:description" content="í•œëˆˆì— ë³´ëŠ” ìˆ™ì†Œ ê°€ê²© ë¹„êµ. ìµìŠ¤í”¼ë””ì•„ ê³µì‹ íŒŒíŠ¸ë„ˆ RapidStay." />
  <meta property="og:image" content="https://rapidstay-c7f8e.web.app/assets/og/main.jpg" />
  <meta property="og:url" content="https://rapidstay-c7f8e.web.app/" />
  <meta property="og:site_name" content="RapidStay" />
  <link rel="canonical" href="https://rapidstay-c7f8e.web.app/" />
  <meta name="robots" content="index,follow" />

  <!-- âœ… Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="RapidStay | ì „ ì„¸ê³„ í˜¸í…”ì„ í•œëˆˆì—" />
  <meta name="twitter:description" content="ì„œìš¸Â·ë¶€ì‚°Â·ì œì£¼ ë“± ì£¼ìš” ì—¬í–‰ì§€ ìˆ™ì†Œ ì‹¤ì‹œê°„ ë¹„êµ." />
  <meta name="twitter:image" content="https://rapidstay-c7f8e.web.app/assets/og/main.jpg" />

  <link rel="icon" href="/favicon.ico" />
  <meta name="theme-color" content="#0f172a" />

  <!-- âœ… CSS -->
  <link rel="stylesheet" href="/css/common.css" />
  <link rel="stylesheet" href="/css/header-search.css" />
  <link rel="stylesheet" href="/css/home.css" />

  <!-- âœ… JS -->
  <script type="module" src="/js/home.js"></script>
  <script type="module" src="/js/auth.js"></script>
</head>

<body>
  <!-- âœ… ê³µí†µ í—¤ë” -->
  <div id="headerContainer"></div>

  <!-- âœ… ë¡œê·¸ì¸ ë²„íŠ¼ -->
  <div id="authWrapper" style="position:fixed;top:20px;right:20px;z-index:1000;display:none;">
    <button id="authBtn" style="padding:8px 14px;border-radius:8px;cursor:pointer;background:#0f172a;color:white;border:none;">
      ë¡œê·¸ì¸
    </button>
  </div>

  <main id="content">
    <!-- âœ… ê²€ìƒ‰ ê²°ê³¼ or ì¶”ì²œ ì„¹ì…˜ -->
    <section id="hotel-list"></section>

    <section id="city-preview" style="max-width:900px;margin:60px auto;padding:0 20px;">
      <h2 style="text-align:center;margin-bottom:30px;">ğŸŒ ì£¼ìš” ë„ì‹œ ì¶”ì²œ ìˆ™ì†Œ</h2>
      <div id="cityContainer"></div>
    </section>
  </main>

  <footer>â“’ 2025 RapidStay | Expedia Partner Data ê¸°ë°˜</footer>

  <!-- âœ… ë¡œê·¸ì¸ ëª¨ë‹¬ -->
  <div id="loginModal"
       style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.45); z-index:2000; backdrop-filter: blur(2px);">
    <div style="width:320px; margin:10% auto; background:white; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.2);">
      <h3 style="margin-top:0;text-align:center;">RapidStay ë¡œê·¸ì¸</h3>
      <input id="loginEmail" type="email" placeholder="ì´ë©”ì¼" style="width:100%;margin:8px 0;padding:10px;border:1px solid #ddd;border-radius:6px;">
      <input id="loginPw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" style="width:100%;margin:8px 0;padding:10px;border:1px solid #ddd;border-radius:6px;">
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:14px;">
        <button id="loginCancel" style="padding:6px 12px;border:none;background:#ccc;border-radius:6px;">ì·¨ì†Œ</button>
        <button id="loginSubmit" style="padding:6px 12px;border:none;background:#0f172a;color:white;border-radius:6px;">ë¡œê·¸ì¸</button>
      </div>
    </div>
  </div>

  <!-- âœ… JS -->
  <script type="module">
    import { loadPartial } from "/js/common.js";
    import "/js/home.js";
    import { login, getToken, isTokenExpired, logout, authFetch } from "/js/auth.js";

    // í—¤ë” ë¡œë“œ
    loadPartial("headerContainer", "/partials/header-search.html");

    const authBtn = document.getElementById("authBtn");
    const modal = document.getElementById("loginModal");
    const emailEl = document.getElementById("loginEmail");
    const pwEl = document.getElementById("loginPw");
    const cancelEl = document.getElementById("loginCancel");
    const submitEl = document.getElementById("loginSubmit");

    function updateAuthButton() {
      const token = getToken();
      if (token && !isTokenExpired()) {
        authBtn.textContent = "ë¡œê·¸ì•„ì›ƒ";
        authBtn.onclick = () => logout();
      } else {
        authBtn.textContent = "ë¡œê·¸ì¸";
        authBtn.onclick = () => (modal.style.display = "block");
      }
    }

    cancelEl.onclick = () => (modal.style.display = "none");

    submitEl.onclick = async () => {
      try {
        await login(emailEl.value.trim(), pwEl.value.trim());
        modal.style.display = "none";
        updateAuthButton();
        alert("âœ… ë¡œê·¸ì¸ ì„±ê³µ!");
      } catch (e) {
        alert(e.message || "ë¡œê·¸ì¸ ì‹¤íŒ¨");
      }
    };

    updateAuthButton();
  </script>
</body>
</html>
