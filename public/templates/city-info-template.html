<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- âœ… SEO / OG -->
  <title>{{title}}</title>
  <meta name="description" content="{{description}}" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="{{title}}" />
  <meta property="og:description" content="{{description}}" />
  <meta property="og:image" content="{{imageUrl}}" />
  <meta property="og:url" content="{{canonicalUrl}}" />
  <meta property="og:site_name" content="RapidStay" />
  <meta name="date" content="{{date}}" />
  <link rel="canonical" href="{{canonicalUrl}}" />
  <meta name="robots" content="{{ROBOTS}}" />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{title}}" />
  <meta name="twitter:description" content="{{description}}" />

  <!-- âœ… ìŠ¤íƒ€ì¼ -->
  <link rel="stylesheet" href="/css/common.css" />
  <link rel="stylesheet" href="/css/header-search.css" />
  <link rel="stylesheet" href="/css/city-info.css" />

  <style>
    main{max-width:960px;margin:0 auto;padding:0 20px 64px}
    h2.section-title{font-size:1.4rem;color:#16396b;margin:40px 0 18px;border-left:4px solid #0078d4;padding-left:10px;font-weight:700}
    table.city-facilities{width:100%;border-collapse:collapse;margin-bottom:30px}
    table.city-facilities th,table.city-facilities td{border:1px solid #e2e8f0;padding:10px 14px;text-align:left;vertical-align:top}
    table.city-facilities th{background:#f9fbfd;width:160px;color:#1b3b6f}
    .nearby-wrap a{display:inline-block;margin:6px;padding:10px 14px;background:#eef4ff;border-radius:8px;color:#0059b2;text-decoration:none}
    .nearby-wrap a:hover{background:#d8e7ff}
    .cta-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;justify-content:center}
    .cta-row a{display:inline-block;padding:10px 14px;border-radius:8px;border:1px solid #d8e7ff;color:#0059b2;text-decoration:none}
    .cta-row a:hover{background:#f0f6ff}
  </style>
</head>

<body class="city-info-page">
  <!-- âœ… ê³µí†µ í—¤ë” -->
  {{HEADER_SEARCH}}

  <!-- âœ… ë„ì‹œ Hero (ì´ë¯¸ì§€/ì œëª©/ì„¤ëª…/íƒœê·¸/ë¸Œë ˆë“œí¬ëŸ¼) -->
  <section class="city-hero" id="cityHero">
    <!-- JSê°€ ë Œë”ë§ -->
  </section>

  <main>
    <!-- âœ… ì£¼ìš” ê´€ê´‘ì§€ & ì‹œì„¤ -->
    <h2 class="section-title">ğŸ›ï¸ ì£¼ìš” ê´€ê´‘ì§€ & ì‹œì„¤</h2>
    <table class="city-facilities" id="facilityTable">
      <tr><th>ëŒ€í‘œ ëª…ì†Œ</th><td>-</td></tr>
      <tr><th>ê³µí•­ / êµí†µ</th><td>-</td></tr>
      <tr><th>ì‡¼í•‘ / ìŒì‹</th><td>-</td></tr>
      <tr><th>ìˆ™ì†Œ ë°€ì§‘ ì§€ì—­</th><td>-</td></tr>
    </table>

    <!-- âœ… ì¸ì ‘ ë„ì‹œ -->
    <h2 class="section-title">ğŸŒ ì¸ì ‘ ë„ì‹œ ì¶”ì²œ</h2>
    <div class="nearby-wrap" id="nearbyCities"></div>

    <!-- âœ… ê´€ë ¨ ë§í¬ (í˜¸í…” í˜ì´ì§€ ì´ë™) -->
    <div class="cta-row" id="ctaLinks"></div>
  </main>

  <footer style="text-align:center;margin:60px 0 30px;color:#777;font-size:13px;">
    â“’ 2025 RapidStay | Expedia Partner Data ê¸°ë°˜
  </footer>

  <!-- âœ… (ì„ íƒ) êµ¬ì¡°í™” ë°ì´í„°: WebPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"{{title}}",
    "description":"{{description}}",
    "url":"{{canonicalUrl}}",
    "inLanguage":"ko"
  }
  </script>

  <!-- === JS === -->
  <script type="module">
    /* ë„ì‹œ ìŠ¬ëŸ¬ê·¸ ë§¤í•‘ (display â†’ name.lower) */
    import { TARGET_CITIES } from "/js/cities.js";
    window.citySlugMap = Object.fromEntries(
      TARGET_CITIES.map(c => [c.display, c.name.toLowerCase()])
    );
  </script>

  <script>
    // í…œí”Œë¦¿ ì¹˜í™˜ê°’
const CITY_NAME_DISPLAY = "{{cityName}}";

// ì•ˆì „í•œ Fallback ì²˜ë¦¬
let OG_IMAGE_FALLBACK = "{{imageUrl}}";
if (!OG_IMAGE_FALLBACK || OG_IMAGE_FALLBACK.includes("{{")) {
  OG_IMAGE_FALLBACK = `https://picsum.photos/seed/${CITY_NAME_DISPLAY}/1200/600`;
}

document.addEventListener("DOMContentLoaded", async () => {
  const slug = window.citySlugMap?.[CITY_NAME_DISPLAY] || (CITY_NAME_DISPLAY||"").toLowerCase();

  // city-map.json ë¡œë“œ
  let cityMap = [];
  try {
    const res = await fetch("/city-data/city-map.json");
    cityMap = await res.json();
  } catch (e) {
    console.error("âŒ city-map.json ë¡œë“œ ì‹¤íŒ¨:", e);
  }

  const info = cityMap.find(c =>
    c.name.toLowerCase() === slug || c.display === CITY_NAME_DISPLAY
  ) || { name: slug, display: CITY_NAME_DISPLAY, description: "{{description}}", image: "", tags: [] };

  // ìµœì¢… ì´ë¯¸ì§€ ê²°ì •
  const imgSrc = (info.image && !info.image.includes("{{")) ? info.image : OG_IMAGE_FALLBACK;

  // âœ… Hero ë Œë”ë§ (ë°°ê²½ì´ë¯¸ì§€ ë°©ì‹: ì˜ì—­ í•­ìƒ ìœ ì§€)
  const hero = document.getElementById("cityHero");
  hero.innerHTML = `
    <div class="city-hero-img" style="background-image:url('${imgSrc}');"></div>
    <div class="city-hero-content">
      <h1>ğŸŒ† ${info.display}</h1>
      <p>${info.description || ""}</p>
      <div class="city-tags">
        ${(info.tags||[]).map(t => `<span>#${t}</span>`).join("")}
      </div>
      <nav class="city-breadcrumb">
        <a href="/">í™ˆ</a> â€º <a href="/city-info/">ë„ì‹œì •ë³´</a> â€º <span>${info.display}</span>
      </nav>
    </div>
  `;

  // ì‹œì„¤í‘œ ì´ˆê¸°í™”(ì§€ê¸ˆì€ í”Œë ˆì´ìŠ¤í™€ë”)
  const facilityTable = document.getElementById("facilityTable");
  if (facilityTable) facilityTable.querySelectorAll("td").forEach(td => td.textContent = "-");


      // âœ… ì¸ì ‘ ë„ì‹œ 3ê°œ ëœë¤
      const nearby = (cityMap.filter(c => c.name.toLowerCase() !== (info.name||"").toLowerCase()))
        .sort(() => 0.5 - Math.random()).slice(0, 3);
      const nearbyDiv = document.getElementById("nearbyCities");
      nearbyDiv.innerHTML = nearby.map(c =>
        `<a href="/city-info/${c.name.toLowerCase()}.html">${c.display}</a>`
      ).join("");

      // âœ… í˜¸í…” í˜ì´ì§€ CTA
      const cta = document.getElementById("ctaLinks");
      cta.innerHTML = `
        <a href="/city-hotel/${slug}.html">ğŸ¨ ${info.display} í˜¸í…” ë°”ë¡œ ë³´ê¸°</a>
        <a href="/city-hotel/${slug}.html#hotelList-top">ì¸ê¸° ìˆ™ì†Œ</a>
        <a href="/city-hotel/${slug}.html#hotelList-family">ê°€ì¡±ì—¬í–‰</a>
        <a href="/city-hotel/${slug}.html#hotelList-pet">ë°˜ë ¤ë™ë¬¼</a>
      `;
    });
  </script>
</body>
</html>
